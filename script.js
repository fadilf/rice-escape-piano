const AudioContext = window.AudioContext || window.webkitAudioContext;
const audio = new AudioContext();

let keys = null;
let offset = 36;
const noteFreq = [
	27.500000000000000, //[0]["A"]
	29.135235094880619, //[0]["A#"]
	30.867706328507756, //[0]["B"]
	32.703195662574829, //[1]["C"]
	34.647828872109012, //[1]["C#"]
	36.708095989675945, //[1]["D"]
	38.890872965260113, //[1]["D#"]
	41.203444614108741, //[1]["E"]
	43.653528929125485, //[1]["F"]
	46.249302838954299, //[1]["F#"]
	48.999429497718661, //[1]["G"]
	51.913087197493142, //[1]["G#"]
	55.000000000000000, //[1]["A"]
	58.270470189761239, //[1]["A#"]
	61.735412657015513, //[1]["B"]
	65.406391325149658, //[2]["C"]
	69.295657744218024, //[2]["C#"]
	73.416191979351890, //[2]["D"]
	77.781745930520227, //[2]["D#"]
	82.406889228217482, //[2]["E"]
	87.307057858250971, //[2]["F"]
	92.498605677908599, //[2]["F#"]
	97.998858995437323, //[2]["G"]
	103.826174394986284, //[2]["G#"]
	110.000000000000000, //[2]["A"]
	116.540940379522479, //[2]["A#"]
	123.470825314031027, //[2]["B"]
	130.812782650299317, //[3]["C"]
	138.591315488436048, //[3]["C#"]
	146.832383958703780, //[3]["D"]
	155.563491861040455, //[3]["D#"]
	164.813778456434964, //[3]["E"]
	174.614115716501942, //[3]["F"]
	184.997211355817199, //[3]["F#"]
	195.997717990874647, //[3]["G"]
	207.652348789972569, //[3]["G#"]
	220.000000000000000, //[3]["A"]
	233.081880759044958, //[3]["A#"]
	246.941650628062055, //[3]["B"]
	261.625565300598634, //[4]["C"]
	277.182630976872096, //[4]["C#"]
	293.664767917407560, //[4]["D"]
	311.126983722080910, //[4]["D#"]
	329.627556912869929, //[4]["E"]
	349.228231433003884, //[4]["F"]
	369.994422711634398, //[4]["F#"]
	391.995435981749294, //[4]["G"]
	415.304697579945138, //[4]["G#"]
	440.000000000000000, //[4]["A"]
	466.163761518089916, //[4]["A#"]
	493.883301256124111, //[4]["B"]
	523.251130601197269, //[5]["C"]
	554.365261953744192, //[5]["C#"]
	587.329535834815120, //[5]["D"]
	622.253967444161821, //[5]["D#"]
	659.255113825739859, //[5]["E"]
	698.456462866007768, //[5]["F"]
	739.988845423268797, //[5]["F#"]
	783.990871963498588, //[5]["G"]
	830.609395159890277, //[5]["G#"]
	880.000000000000000, //[5]["A"]
	932.327523036179832, //[5]["A#"]
	987.766602512248223, //[5]["B"]
	1046.502261202394538, //[6]["C"]
	1108.730523907488384, //[6]["C#"]
	1174.659071669630241, //[6]["D"]
	1244.507934888323642, //[6]["D#"]
	1318.510227651479718, //[6]["E"]
	1396.912925732015537, //[6]["F"]
	1479.977690846537595, //[6]["F#"]
	1567.981743926997176, //[6]["G"]
	1661.218790319780554, //[6]["G#"]
	1760.000000000000000, //[6]["A"]
	1864.655046072359665, //[6]["A#"]
	1975.533205024496447, //[6]["B"]
	2093.004522404789077, //[7]["C"]
	2217.461047814976769, //[7]["C#"]
	2349.318143339260482, //[7]["D"]
	2489.015869776647285, //[7]["D#"]
	2637.020455302959437, //[7]["E"]
	2793.825851464031075, //[7]["F"]
	2959.955381693075191, //[7]["F#"]
	3135.963487853994352, //[7]["G"]
	3322.437580639561108, //[7]["G#"]
	3520.000000000000000, //[7]["A"]
	3729.310092144719331, //[7]["A#"]
	3951.066410048992894, //[7]["B"]
];

function setup() {
  
	keys = document.getElementsByClassName("key");

	for (let i = 0; i < keys.length; i++) {
		let curKey = keys[i];
		curKey.setAttribute("onclick", `pressKey(${noteFreq[offset + i]})`);
	}
}

function pressKey(freq) {
	audio.resume();
	console.log(freq);
	(new SoundPlayer(audio)).play(parseFloat(freq), 1, "sine").stop(1);
}
  
setup();